document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll(".cables img"),e=document.getElementById("video"),i=document.querySelector(".static");i&&i.classList.remove("static-on"),t.forEach(t=>{t.addEventListener("click",function(){this.classList.toggle("cable-up"),e.classList.contains("cable-up")?i&&i.classList.add("static-on"):i&&i.classList.remove("static-on")})})});const power=document.getElementById("power"),sw=document.getElementById("switch");power.addEventListener("change",function(){sw.checked=power.checked}),document.addEventListener("DOMContentLoaded",()=>{let t=[document.querySelectorAll("h1.crt-text span"),document.querySelectorAll("div[cx*='ts:8px'] span"),document.querySelectorAll("div[cx*='ts: 16px'] span"),],e=[.7,.2,.25,.5,.1,.6,.5,.5,.5],i=[900,1400,1200,1e3,1500,900,800,800,800],n=Array(t[0].length).fill(0);function l(e){let i=(i=0)=>{setTimeout(()=>{t.forEach(t=>{let i=t[e];i&&i.classList.add("flicker")}),setTimeout(()=>{t.forEach(t=>{let i=t[e];i&&i.classList.remove("flicker")})},20+20*Math.random())},i)};i(),.15>Math.random()&&i(60+40*Math.random()),n[e]=Date.now()}function o(){let e=t[0].length-4;t.forEach(i=>{for(let n=e;n<t[0].length;n++)i[n].classList.add("off")}),setTimeout(()=>{t.forEach(i=>{for(let n=e;n<t[0].length;n++)i[n].classList.remove("off")})},80+40*Math.random())}setInterval(()=>{let t=Date.now();e.forEach((e,o)=>{t-n[o]>i[o]&&Math.random()<.08*e&&l(o)}),.003>Math.random()&&o()},120)});const postItNote=document.getElementById("postItNote");let clickCount=0;function parseCloneAttr(t){let[e,i]=t.split(",").map(t=>t.trim());return{selector:e,mode:(i||"all").toLowerCase()}}function applyClone(t,e,i){if("all"===i){t.innerHTML="";let n=e.cloneNode(!0);n.removeAttribute("id"),n.removeAttribute("clone"),copyComputedStyle(n,e),t.appendChild(n)}else"content"===i?t.innerHTML=e.innerHTML:"style"===i&&copyComputedStyle(t,e)}function copyComputedStyle(t,e){let i=getComputedStyle(e);for(let n of i)t.style[n]=i.getPropertyValue(n)}function observeAndClone(t,e,i){applyClone(t,e,i);let n=new MutationObserver(()=>{applyClone(t,e,i)});if(n.observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),"style"===i||"all"===i){let l=new MutationObserver(()=>{applyClone(t,e,i)});l.observe(e,{attributes:!0,attributeFilter:["style","class"]})}}function setupClones(){document.querySelectorAll("[clone]").forEach(t=>{let{selector:e,mode:i}=parseCloneAttr(t.getAttribute("clone")),n=document.querySelector(e);n&&observeAndClone(t,n,i)})}function updateCounters(){let t={visits:document.querySelector(".counters li.visits span:last-child"),uniqueVisits:document.querySelector(".counters li.uniq-visits span:last-child"),onSite:document.querySelector(".counters li.on-site span:last-child")},e={visits:document.querySelectorAll(".real-counters li.all-visits img"),uniqueVisits:document.querySelectorAll(".real-counters li.visits img"),onSite:document.querySelectorAll(".real-counters li.viewers img")};function i(t){let e=[];return t.forEach(t=>{let i=t.getAttribute("src");if(!i.includes("l.gif")&&!i.includes("r.gif")){let n=i.match(/\/([0-9])\.gif$/);n&&n[1]&&e.push(n[1])}}),e.length>0?e.join("").padStart(8,"0"):"00000000"}t.visits&&(t.visits.textContent=i(e.visits)),t.uniqueVisits&&(t.uniqueVisits.textContent=i(e.uniqueVisits)),t.onSite&&(t.onSite.textContent=i(e.onSite))}function animateWires(){let t=document.querySelectorAll('svg[role="wire"]'),e=performance.now()/1e3;t.forEach(t=>{let i=t.clientWidth,n=parseFloat(t.dataset.basesag)||30,l=parseFloat(t.dataset.amplitude)||20,o=t.querySelector("path");o||(o=document.createElementNS("http://www.w3.org/2000/svg","path"),t.appendChild(o));let s=`M0,0 C ${i/3},${n+l*Math.sin(e)} ${2*i/3},${n+l*Math.cos(e)} ${i},0`;o.setAttribute("d",s)}),requestAnimationFrame(animateWires)}postItNote.addEventListener("click",function(t){if(2==++clickCount&&(postItNote.classList.add("gentle-swivel"),postItNote.addEventListener("animationend",function t(){postItNote.classList.remove("gentle-swivel"),postItNote.removeEventListener("animationend",t)})),3===clickCount){postItNote.style.pointerEvents="none";let e=t.clientX,i=window.innerWidth/2,n=(e-i)/i*45,l=postItNote.getBoundingClientRect(),o=l.top,s=window.innerHeight-o+200,r=null;function a(t){r||(r=t);let e=t-r,i=Math.min(e/1e3,1),l=i*i;postItNote.style.transform=`translateY(${l*s}px) rotate(${l*n}deg)`,postItNote.style.opacity=1-i,i<1?requestAnimationFrame(a):postItNote.remove()}postItNote.style.transformOrigin="50% 0%",requestAnimationFrame(a)}}),document.addEventListener("DOMContentLoaded",setupClones),setInterval(updateCounters,500),animateWires();const GRAVITY=.5,DECAY_BASE=.03,DECAY_RANDOM=.03,VELOCITY_X=15,VELOCITY_Y=10;class Spark{constructor(t,e){this.element=document.createElement("div"),this.element.className="spark",this.x=t,this.y=e,this.velocityX=(Math.random()-.5)*15,this.velocityY=(Math.random()-1)*10,this.gravity=.5,this.life=1,this.decay=.03*Math.random()+.03,document.body.appendChild(this.element),this.element.style.left=this.x+"px",this.element.style.top=this.y+"px",this.update()}updateRotation(){let t=Math.atan2(this.velocityY,this.velocityX);this.element.style.transform=`rotate(${t*(180/Math.PI)}deg)`}update(){this.life>0?(this.velocityY+=this.gravity,this.x+=this.velocityX,this.y+=this.velocityY,this.life-=this.decay,(this.x<-100||this.x>window.innerWidth+100||this.y<-100||this.y>window.innerHeight+100)&&(this.life=0),this.element.style.left=this.x+"px",this.element.style.top=this.y+"px",this.element.style.opacity=this.life,this.updateRotation(),requestAnimationFrame(()=>this.update())):this.element.remove()}}class SparkEmitter{constructor(t){this.element=t,this.spawnRate=parseInt(t.dataset.spawn)||30,this.x=0,this.y=0,this.updatePosition(),this.start()}updatePosition(){let t=this.element.getBoundingClientRect();this.x=t.left+t.width/2,this.y=t.top+t.height/2}start(){let t=()=>{100*Math.random()<this.spawnRate&&new Spark(this.x,this.y),requestAnimationFrame(t)};t()}}document.querySelectorAll(".emitter").forEach(t=>{let e=new SparkEmitter(t);window.addEventListener("resize",()=>e.updatePosition())});const content=document.createElement("div");document.body.appendChild(content);const warningElement=document.querySelector(".warning");function getRandomOpacity(){return.8*Math.random()+.2}function getRandomDuration(){return 140*Math.random()+20}function applyBrokenFlicker(){let t=Math.floor(5*Math.random())+3,e=0;!function i(){if(e<t){let n=getRandomOpacity(),l=getRandomDuration();warningElement.style.opacity=n,setTimeout(()=>{warningElement.style.opacity=1,e++,i()},l)}else warningElement.style.opacity=1,setTimeout(applyBrokenFlicker,1e4*Math.random()+5e3)}()}function getRandomInterval(t,e){return Math.random()*(e-t)+t}function blinkLED(t,e,i){!function n(){t.classList.toggle("off");let l=getRandomInterval(e,i);setTimeout(n,l)}()}applyBrokenFlicker();const redLED=document.querySelector(".led.active"),greenLED=document.querySelector(".led.green");blinkLED(redLED,50,1500),blinkLED(greenLED,50,1500),document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll("[data-sound][data-maxvol][data-maxdist]"),e=new Map;t.forEach(t=>{let i=t.getAttribute("data-sound"),n=new Audio(i);n.loop=!0,n.volume=0,n.play(),e.set(t,n)});let i=(t,e,i)=>{let n=i.getBoundingClientRect(),l=n.left+n.width/2,o=n.top+n.height/2;return Math.sqrt(Math.pow(t-l,2)+Math.pow(e-o,2))},n=(n,l)=>{t.forEach(t=>{let o=parseFloat(t.getAttribute("data-maxvol"))||1,s=parseFloat(t.getAttribute("data-maxdist"))||100,r=i(n,l,t),a=e.get(t);if(r<=s){let c=o*(1-r/s);a.volume=Math.max(0,Math.min(c,o))}else a.volume=0})};document.addEventListener("mousemove",t=>{let e=t.clientX,i=t.clientY;n(e,i)}),document.addEventListener("visibilitychange",()=>{document.hidden&&e.forEach(t=>{t.volume=0})})});(function(){if(window.__fc2CountersLoaded)return;window.__fc2CountersLoaded=!0;document.addEventListener("DOMContentLoaded",function(){const countersDiv=document.querySelector(".real-counters");if(!countersDiv)return;function addScriptToLi(selector,src){const li=countersDiv.querySelector(selector);if(!li)return;if(Array.from(li.getElementsByTagName("script")).some((s)=>s.src===src)){return}
const script=document.createElement("script");script.type="text/javascript";script.src=src;li.appendChild(script)}
const isLocal=location.hostname==="localhost"||location.hostname==="127.0.0.1";if(!isLocal){addScriptToLi(".all-visits","//counter1.fc2.com/counter.php?id=89511230")}
addScriptToLi(".visits","https://counter1.fc2.com/counter.php?id=40270682&main=1");addScriptToLi(".viewers","https://counter1.fc2.com/views.php?id=40270682&main=1")})})()
