function parseCloneAttr(e){let[t,l]=e.split(",").map(e=>e.trim());return{selector:t,mode:(l||"all").toLowerCase()}}function applyClone(e,t,l){if("all"===l){e.innerHTML="";let o=t.cloneNode(!0);o.removeAttribute("id"),o.removeAttribute("clone"),copyComputedStyle(o,t),e.appendChild(o)}else"content"===l?e.innerHTML=t.innerHTML:"style"===l&&copyComputedStyle(e,t)}function copyComputedStyle(e,t){let l=getComputedStyle(t);for(let o of l)e.style[o]=l.getPropertyValue(o)}function observeAndClone(e,t,l){applyClone(e,t,l);let o=new MutationObserver(()=>{applyClone(e,t,l)});if(o.observe(t,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),"style"===l||"all"===l){let n=new MutationObserver(()=>{applyClone(e,t,l)});n.observe(t,{attributes:!0,attributeFilter:["style","class"]})}}function setupClones(){document.querySelectorAll("[clone]").forEach(e=>{let{selector:t,mode:l}=parseCloneAttr(e.getAttribute("clone")),o=document.querySelector(t);o&&observeAndClone(e,o,l)})}document.addEventListener("DOMContentLoaded",setupClones);
